<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>Angular file upload sample</title>

  <script src="../lib/angular/angular.min.js"></script>
  <script src="js/ng-file-upload-shim.js"></script>
  <script src="js/ng-file-upload.js"></script>
  <script src="js/upload.js"></script>
</head>

<body ng-app="fileUpload" ng-controller="MyCtrl">

<div class="upload-div">

  <div class="upload-buttons">
    <div id="editArea">
      <div>
        <div>
          <form name="myForm">
            <fieldset>
              {{d}}
              <legend>Upload on form submit</legend>
              <pre>
              https://angular-file-upload-cors-srv.appspot.com/upload?name=aaaa
              
              </pre>
              Server <input type="text" name="serverUrl" ng-model="serverUrl" size="39" required>
              Username: <input type="text" name="userName" ng-model="username" size="39" required>
              <i ng-show="myForm.userName.$error.required">*required</i><br>
              Profile Picture: <input type="file" ngf-select ng-model="picFile" name="file" required>
              <i ng-show="myForm.file.$error.required">*required</i>
              <br/>

              <button ng-disabled="!myForm.$valid" ng-click="uploadPic(picFile)">Submit</button>
              <img ngf-src="picFile" class="thumb">
              <span class="progress" ng-show="picFile.progress >= 0">
                  <div style="width:{{picFile.progress}}%" ng-bind="picFile.progress + '%'"></div>
              </span>
              <span ng-show="picFile.result">Upload Successful</span>
            </fieldset>
            <br/>
          </form>
        </div>
        <br/>
      </div>
    </div>
  </div>
  <ul style="clear:both" class="response">
    <li class="sel-file" ng-repeat="f in files">
      <div>
        <img ngf-thumbnail="!f.$error && f" class="thumb">
				<span class="progress" ng-show="f.progress >= 0">
					<div style="width:{{f.progress}}%">{{f.progress}}%</div>
				</span>
        <button class="button" ng-click="f.upload.abort();f.upload.aborted=true"
                ng-show="f.upload != null && f.progress < 100 && !f.upload.aborted">
          Abort<span ng-show="isResumeSupported">/Pause</span>
        </button>
        <button class="button" ng-click="upload(f, true);f.upload.aborted=false"
                ng-show="isResumeSupported && f.upload != null && f.upload.aborted">Resume
        </button>
        <button class="button" ng-click="restart(f);f.upload.aborted=false"
                ng-show="isResumeSupported && f.upload != null && (f.progress == 100 || f.upload.aborted)">Restart
        </button>
        {{f.name}} - size: {{f.size}}B - type: {{f.type}}
        <a ng-show="f.result" href="javascript:void(0)" ng-click="f.showDetail = !f.showDetail">details</a>

        <div ng-show="f.showDetail">
          <br/>

          <div data-ng-show="f.result.result == null">{{f.result}}</div>
          <ul>
            <li ng-repeat="item in f.result.result">
              <div data-ng-show="item.name">file name: {{item.name}}</div>
              <div data-ng-show="item.fieldName">name: {{item.fieldName}}</div>
              <div data-ng-show="item.size">size on the serve: {{item.size}}</div>
              <div data-ng-show="item.value">value: {{item.value}}</div>
            </li>
          </ul>
          <div data-ng-show="f.result.requestHeaders" class="reqh">request headers: {{f.result.requestHeaders}}</div>
        </div>
      </div>
    </li>
    <li class="sel-file" ng-repeat="f in invalidFiles">
      <div>Invalid File: {{f.$error}} {{f.$errorParam}}, {{f.name}} - size: {{f.size}}B - type:
        {{f.type}}
      </div>
    </li>
  </ul>

  <br/>

  <div style="clear:both" class="err" ng-show="errorMsg != null">{{errorMsg}}</div>
</div>

</body>
</html>
